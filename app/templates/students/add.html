{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">{{ title }}</h1>
        <a href="{{ url_for('students.index') }}" class="d-none d-sm-inline-block btn btn-sm btn-secondary shadow-sm">
            <i class="fas fa-arrow-right fa-sm text-white-50"></i> العودة إلى قائمة التلاميذ
        </a>
    </div>

    <!-- Form -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">معلومات التلميذ</h6>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                {{ form.csrf_token }}
                
                <!-- Student Basic Information -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="font-weight-bold text-primary mb-0">البيانات الأساسية</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="student_id">رقم التلميذ *</label>
                                {{ form.student_id(class="form-control") }}
                                {% if form.student_id.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.student_id.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="first_name">الاسم الشخصي *</label>
                                {{ form.first_name(class="form-control") }}
                                {% if form.first_name.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.first_name.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="last_name">النسب *</label>
                                {{ form.last_name(class="form-control") }}
                                {% if form.last_name.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.last_name.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="gender">الجنس *</label>
                                {{ form.gender(class="form-control") }}
                                {% if form.gender.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.gender.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="massar_number">رقم مسار</label>
                                {{ form.massar_number(class="form-control") }}
                                {% if form.massar_number.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.massar_number.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="birth_date">تاريخ الازدياد</label>
                                {{ form.birth_date(class="form-control", type="date") }}
                                {% if form.birth_date.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.birth_date.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="status">الحالة *</label>
                                {{ form.status(class="form-control") }}
                                {% if form.status.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.status.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Educational Information -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="font-weight-bold text-primary mb-0">معلومات دراسية</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="educational_level">المستوى الدراسي *</label>
                                {{ form.educational_level(class="form-control") }}
                                {% if form.educational_level.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.educational_level.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="institution">المؤسسة</label>
                                {{ form.institution(class="form-control") }}
                                {% if form.institution.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.institution.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="monthly_fee">مبلغ الاشتراك الشهري *</label>
                                {{ form.monthly_fee(class="form-control") }}
                                {% if form.monthly_fee.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.monthly_fee.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Guardian Information -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="font-weight-bold text-primary mb-0">معلومات ولي الأمر</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="guardian_name">اسم ولي الأمر *</label>
                                {{ form.guardian_name(class="form-control") }}
                                {% if form.guardian_name.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.guardian_name.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="guardian_national_id">رقم البطاقة الوطنية لولي الأمر</label>
                                {{ form.guardian_national_id(class="form-control") }}
                                {% if form.guardian_national_id.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.guardian_national_id.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="guardian_phone">رقم هاتف ولي الأمر *</label>
                                {{ form.guardian_phone(class="form-control") }}
                                {% if form.guardian_phone.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.guardian_phone.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="guardian_email">البريد الإلكتروني لولي الأمر</label>
                                {{ form.guardian_email(class="form-control") }}
                                {% if form.guardian_email.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.guardian_email.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="address">العنوان</label>
                                {{ form.address(class="form-control") }}
                                {% if form.address.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.address.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Files Upload -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="font-weight-bold text-primary mb-0">الوثائق والصور</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="student_photo">صورة التلميذ</label>
                                {{ form.student_photo(class="form-control-file") }}
                                {% if form.student_photo.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.student_photo.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                <small class="text-muted">الصيغ المقبولة: JPG, PNG, JPEG</small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="commitment_doc">صورة الالتزام الموقع</label>
                                {{ form.commitment_doc(class="form-control-file") }}
                                {% if form.commitment_doc.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.commitment_doc.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                <small class="text-muted">الصيغ المقبولة: JPG, PNG, JPEG, PDF</small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="guardian_id_front">صورة البطاقة الوطنية (الوجه الأمامي)</label>
                                {{ form.guardian_id_front(class="form-control-file") }}
                                {% if form.guardian_id_front.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.guardian_id_front.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                <small class="text-muted">الصيغ المقبولة: JPG, PNG, JPEG, PDF</small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="guardian_id_back">صورة البطاقة الوطنية (الوجه الخلفي)</label>
                                {{ form.guardian_id_back(class="form-control-file") }}
                                {% if form.guardian_id_back.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.guardian_id_back.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                <small class="text-muted">الصيغ المقبولة: JPG, PNG, JPEG, PDF</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Notes -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="font-weight-bold text-primary mb-0">ملاحظات إضافية</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="notes">ملاحظات</label>
                                {{ form.notes(class="form-control", rows=3) }}
                                {% if form.notes.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.notes.errors %}
                                    <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-primary btn-lg px-5">
                        <i class="fas fa-save"></i> حفظ البيانات
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %} 